{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://talos.dev/schemas/session-event.json",
  "title": "Session Event",
  "description": "Session lifecycle events emitted by core package",
  "allOf": [{ "$ref": "event.json" }],
  "properties": {
    "event_type": {
      "enum": [
        "session.opening",
        "session.opened",
        "session.closing",
        "session.closed"
      ]
    },
    "payload": {
      "type": "object",
      "properties": {
        "session_id": {
          "type": "string",
          "description": "Unique session identifier (YYYY-MM-DD-slug-NNN)"
        },
        "goal": {
          "type": "string",
          "description": "Session goal or intention"
        },
        "persona": {
          "type": "string",
          "description": "Active persona (e.g., Talos, Sage)"
        },
        "protocol": {
          "type": "string",
          "description": "Ceremony protocol used (e.g., LBRP)"
        },
        "human": {
          "type": "string",
          "description": "Human collaborator name"
        },
        "inherited_count": {
          "type": "integer",
          "description": "Number of knowledge items at session start"
        },
        "opened_at": {
          "type": "string",
          "format": "date-time"
        },
        "closed_at": {
          "type": "string",
          "format": "date-time"
        },
        "harvest": {
          "type": "string",
          "description": "What the session taught (close event)"
        }
      }
    }
  }
}
